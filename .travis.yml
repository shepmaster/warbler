branches:
  only:
    - master
matrix:
  include:
    - rvm: jruby
      env: JRUBY_OPTS="--1.8 --server -Xcext.enabled=false -Xcompile.invokedynamic=false"
      gemfile: Gemfile1.8
    - rvm: jruby
      env: JRUBY_OPTS="--1.9 --server -Xcext.enabled=false -Xcompile.invokedynamic=false"
    - rvm: jruby-head
      env: JRUBY_OPTS="--1.8 --server -Xcext.enabled=false -Xcompile.invokedynamic=false"
      gemfile: Gemfile1.8
    - rvm: jruby-head
      env: JRUBY_OPTS="--1.9 --server -Xcext.enabled=false -Xcompile.invokedynamic=false"
    - rvm: 1.8.7
      gemfile: Gemfile1.8
    - rvm: 1.9.2
    - rvm: 1.9.3
notifications:
  irc:
    channels:
      - "irc.freenode.org#jruby"
    on_success: change
    on_failure: always
    template:
      - "%{repository} (%{branch}:%{commit} by %{author}): %{message} (%{build_url})" 
before_install: 
  - git fetch --unshallow
  - gem install bundler --pre
